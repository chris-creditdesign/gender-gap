!function(){var a=function(a){a(".outer-wrapper .info-table-wrapper").css({display:"none"}),a(".outer-wrapper .salary-table-wrapper").css({display:"none"}),a(".outer-wrapper .info-chart").css({display:"block"}),a(".outer-wrapper .info-menu").css({display:"block"}),a(".outer-wrapper .nav-tabs").css({display:"block"}),a.getScript("http://d3js.org/d3.v3.min.js",function(){function b(b,c){for(;u.length>0;)u.shift();for(;o.length>0;)o.shift();a(".outer-wrapper table.info-table."+b+" .male ."+c).each(function(){var b=parseFloat(a(this).text());o.push(b)});for(var d=0;d<q.length;d++){var e={};e.x=d,e.y=o[d],u.push(e)}}function c(b,c){for(;v.length>0;)v.shift();for(;p.length>0;)p.shift();a(".outer-wrapper table.info-table."+b+" .female ."+c).each(function(){var b=parseFloat(a(this).text());p.push(b)});for(var d=0;d<q.length;d++){var e={};e.x=d,e.y=p[d],v.push(e)}}function d(b,c){n=[],a(".outer-wrapper table.info-table."+b+" .both-sexes ."+c).each(function(){var b=parseFloat(a(this).text());n.push(b)})}function e(){stack(w),t?(F.domain([0,d3.max(w,function(a){return d3.max(a,function(a){return a.y0+a.y})})]),d3.select(".outer-wrapper .info-chart .y").transition().duration(m).call(H)):(F.domain([0,d3.max(D)]),d3.select(".outer-wrapper .info-chart .y").transition().duration(m).call(H)),J.selectAll("rect").data(function(a){return a}).transition().duration(m).attr("y",function(a){return F(a.y)+F(a.y0)-j}).attr("height",function(a){return j-F(a.y)})}function f(){a(".outer-wrapper table.salary-table td").each(function(){var b=parseFloat(a(this).text());C.push(b)})}function g(b,c,d){B=[],a(".outer-wrapper table.salary-table."+b+" ."+c+"."+d+" td").each(function(){var b=parseFloat(a(this).text());B.push(b)})}function h(){O.selectAll("rect").data(B).transition().attr("opacity",function(a){return 0===a?0:1}).transition().duration(m).attr("y",function(a){return 0===a?j/2:L(a)}).attr("height",function(a){return 0===a?j-j/2:j-L(a)}),P.selectAll("text").data(B).transition().attr("fill",function(a){return 0===a?"black":"white"}).transition().duration(m).text(function(a){return 0===a?"Data not available":"$"+thousandFormat(a)}).attr("y",function(a){return 0===a?j/2+20:L(a)+20})}var i=625,j=300,k=5,l=60,m=500,n=[],o=[],p=[],q=[],r="all-positions",s="all-fields",t=!1,u=[],v=[],w=[],x="all-occupations",y="all-degrees",z="all-ages",A=[],B=[],C=[];thousandFormat=d3.format(",.0f"),stack=d3.layout.stack(),a(".outer-wrapper .nav-tabs a:first").click(function(b){return a(this).parent("li").hasClass("active")||(a(".outer-wrapper .nav-tabs a:not(:first)").parent("li").removeClass("active"),a(this).parent("li").addClass("active"),a(".outer-wrapper .info-chart").css({display:"block"}),a(".outer-wrapper .salary-chart").css({display:"none"}),a(".outer-wrapper .info-menu").css({display:"block"}),a(".outer-wrapper .salary-menu").css({display:"none"})),b.preventDefault(),!1}),a(".outer-wrapper .nav-tabs a:not(:first)").click(function(b){return a(this).parent("li").hasClass("active")||(a(".outer-wrapper .nav-tabs a:first").parent("li").removeClass("active"),a(this).parent("li").addClass("active"),a(".outer-wrapper .info-chart").css({display:"none"}),a(".outer-wrapper .salary-chart").css({display:"block"}),a(".outer-wrapper .info-menu").css({display:"none"}),a(".outer-wrapper .salary-menu").css({display:"block"})),b.preventDefault(),!1}),a(".outer-wrapper table.info-table.all-positions thead tr th:not(:first)").each(function(){var b=a(this).text();q.push(b)}),d(r,s),b(r,s),c(r,s);var D=n.concat();w.push(v),w.push(u),stack(w);{var E=d3.scale.linear().domain([l,i]).range([l,i]),F=d3.scale.linear().domain([0,d3.max(w,function(a){return d3.max(a,function(a){return a.y0+a.y})})]).range([j,l]),G=d3.svg.axis().scale(E).orient("bottom").tickSize(0,0).ticks(0),H=d3.svg.axis().scale(F).orient("left").tickSize(6,0).ticks(7),I=d3.select(".outer-wrapper .info-chart").append("svg").attr("width",i).attr("height",j+l/2),J=I.selectAll("g").data(w).enter().append("g").style("fill",function(a,b){return 0===b?"#E53524":"#F8B436"});J.selectAll("rect").data(function(a){return a}).enter().append("rect").attr("x",function(a,b){return b*((i-l)/w[0].length)+l}).attr("y",function(a){return F(a.y)+F(a.y0)-j}).attr("height",function(a){return j-F(a.y)}).attr("width",(i-l)/w[0].length-k).on("mouseover",function(b){var c,d=parseInt(a(".outer-wrapper .infobox").css("height")),e=parseInt(d3.select(this).attr("y"))+parseInt(d3.select(this).attr("height"))/2-d;d3.select(this).attr("x")<350?(c=parseFloat(d3.select(this).attr("x"))+27,d3.select(".outer-wrapper .infobox").classed("infobox-left",!1).classed("infobox-right",!0)):(c=parseFloat(d3.select(this).attr("x"))-140,d3.select(".outer-wrapper .infobox").classed("infobox-left",!0).classed("infobox-right",!1)),d3.select(".outer-wrapper .infobox").style("left",c+"px").style("top",e+"px").select(".value").text(b.y),d3.select(".outer-wrapper .infobox").classed("hidden",!1)}).on("mouseout",function(){d3.select(".outer-wrapper .infobox").classed("hidden",!0)})}I.selectAll("text").data(q).enter().append("text").text(function(a){return a}).attr("x",function(a,b){return b*((i-l)/q.length)+((i-l)/q.length-k)/2+l}).attr("y",function(){return j+12}).attr("font-family","sans-serif").attr("font-size","11px").attr("fill","black").attr("text-anchor","middle"),I.append("g").attr("class","x axis").attr("transform","translate(0,"+j+")").call(G),I.append("g").attr("class","y axis").attr("transform","translate("+l+", 0)").call(H).append("text").attr("transform","rotate(-90)").attr("y",-l+12).attr("x",-(j/2)).attr("dy",".71em").style("text-anchor","end").text("Thousands"),d3.selectAll(".outer-wrapper .info-menu select").on("change",function(){r=d3.select(".outer-wrapper .info-menu .position-dropdown").property("value"),s=d3.select(".outer-wrapper .info-menu .field-dropdown").property("value"),d(r,s),b(r,s),c(r,s),e()}),d3.selectAll(".outer-wrapper .info-menu input").on("change",function(){t=d3.select(this).property("checked"),e()}),a(".outer-wrapper table.salary-table.all-occupations thead tr th:not(:first)").each(function(){var b=a(this).text();A.push(b)}),g(x,y,z),f();var K=d3.scale.linear().domain([12*k,i]).range([12*k,i]),L=d3.scale.linear().domain([0,d3.max(C)]).range([j,l]),M=d3.svg.axis().scale(K).orient("bottom").tickSize(0,0).ticks(0),N=d3.svg.axis().scale(L).orient("left").tickSize(-i,0).ticks(7).tickFormat(d3.format(",.0f")),O=d3.select(".outer-wrapper .salary-chart").append("svg").attr("width",i).attr("height",j+l/2);O.append("g").attr("class","y axis").attr("transform","translate("+12*k+", 0)").call(N),O.selectAll("rect").data(B).enter().append("rect").attr("x",function(a,b){return b*((i-2*k)/B.length)+14*k}).attr("y",function(a){return L(a)}).attr("width",(i-2*k)/B.length-14*k).attr("height",function(a){return j-L(a)}).attr("opacity",1).style("fill",function(a,b){return 0===b?"#E53524":"#F8B436"});var P=O.append("g");P.selectAll("text").data(B).enter().append("text").text(function(a){return"$"+thousandFormat(a)}).attr("x",function(a,b){return b*((i-2*k)/B.length)+((i-2*k)/B.length-14*k)/2+14*k}).attr("y",function(a){return L(a)+20}).attr("font-family","sans-serif").attr("font-size","18px").attr("fill","white").attr("text-anchor","middle");var Q=O.append("g");Q.selectAll("text").data(A).enter().append("text").text(function(a){return a}).attr("x",function(a,b){return b*((i-2*k)/B.length)+((i-2*k)/B.length-14*k)/2+14*k}).attr("y",function(){return j+18}).attr("font-family","sans-serif").attr("font-size","14px").attr("fill","black").attr("text-anchor","middle"),O.append("g").attr("class","x axis").attr("transform","translate(0,"+j+")").call(M),d3.selectAll(".outer-wrapper .salary-menu select").on("change",function(){x=d3.select(".outer-wrapper .salary-menu .occupation-dropdown").property("value"),y=d3.select(".outer-wrapper .salary-menu .age-dropdown").property("value"),z=d3.select(".outer-wrapper .salary-menu .degree-dropdown").property("value"),g(x,y,z),h()})})};setTimeout(function(){"undefined"!=typeof jQuery?a(jQuery):setTimeout(arguments.callee,60)},60)}();